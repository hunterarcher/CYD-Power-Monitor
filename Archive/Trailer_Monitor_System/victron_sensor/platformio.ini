[env:esp32dev]
platform = espressif32@6.8.1
board = esp32dev
framework = arduino
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Custom partition for more app space
board_build.partitions = custom_partitions.csv

; Maximum memory optimization for BLE + ESP-NOW only
build_flags = 
    -DCORE_DEBUG_LEVEL=0
    -DCONFIG_ARDUHAL_LOG_DEFAULT_LEVEL=0
    -DCONFIG_LOG_DEFAULT_LEVEL=0
    -DCONFIG_BT_ENABLED=1
    -DCONFIG_BLUEDROID_ENABLED=1
    -DCONFIG_FREERTOS_UNICORE=1
    -DARDUINO_RUNNING_CORE=0
    -DARDUINO_EVENT_RUNNING_CORE=0
    -DCONFIG_ARDUINO_LOOP_STACK_SIZE=4096
    -DCONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM=4
    -DCONFIG_ESP32_WIFI_DYNAMIC_RX_BUFFER_NUM=8
    -DCONFIG_ESP32_WIFI_TX_BUFFER_TYPE=1
    -DCONFIG_ESP32_WIFI_DYNAMIC_TX_BUFFER_NUM=8
    -Os

lib_deps = 
    ; AES library for Victron decryption
    rweather/Crypto@^0.4.0